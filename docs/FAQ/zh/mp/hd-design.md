# 硬件设计和验证常见问题

### **硬件设计有哪些注意事项？**

- 由于QuecPython目前(2023/04/11)并没有专门的硬件设计文档，所以只能参考QuecOpen的硬件设计文档，由于QuecPython和QuecOpen存在一定差异，例如有哪些引脚可以作为GPIO不能直接参考QuecOpen的文档，则要参考QuecPython的API文档[GPIO](./../../../API_reference/zh/QuecPython类库/machine.Pin.html)介绍的引脚，其他功能如UART等类同。
- 同上，由于具有差异，模块引脚的复位电平状态可能和文档描述的存在差异，状态灯、继电器等对电平默认状态可能较为关注的场景，建议使用示波器或万用表对下载了QuecPython固件的模块引脚电平进行测量做二次确认。
- 硬件设计时必须引出USB相关引脚，否则将无法进行固件下载和代码调试。
- 硬件设计时建议引出USB_BOOT引脚，部分模组，如EC600E/EC800E必须引出，否则将不方便固件下载。
- 建议将模组的debug串口引脚都引出测试点，方便出现问题时进行底层APP日志的抓取。
- 模组的数字引脚电压域绝大部分为0-1.8V电压，不可超过，否则将可能导致不可逆的损坏，在与其他电压域的器件进行通信时请使用电平转换电路进行电平转换。
- 更多信息请详细参考硬件设计手册及参考设计手册。

### **硬件设计时对电源有什么要求？**

一般都要求至少能够提供2A及以上电流的电源，详情要参考各个模块硬件设计文档。

### UART功能的硬件设计一般需要注意哪些问题？

- 注意电压域，如不匹配请进行电平转换。
- UART波特率较高时请注意硬件电平转换电路的电平转换速率能否达到要求，推荐使用电平转换芯片进行转换。
- 如需使用低功耗功能，模组会进入休眠模式，此时UART只有MAIN UART可以将模块从睡眠中唤醒，且会丢失几个字节数据用于唤醒，推荐硬件设计时设计一个外部中断引脚用于先将模组从休眠中唤醒，再将数据发送给模组，确保模组可以收到完整的数据。

### 自己设计的PCB上电开机后电脑上看不到USB端口是什么原因？

建议按照以下步骤进行检查：

- 若使用开发评估板测试过，请使用开发评估板插上同一条USB线和电脑端口对比是否能够识别，可以直接排除电脑USB驱动问题、电脑USB接口问题、USB线问题。
- USB能够被电脑正常识别需要确认模块已经正常开机，一般正常开机后VDD_EXT引脚会输出1.8V，通过MAIN_UART可以发送AT指令并正常获得返回，如未开机请先进行开机。
- 如已开机，开发评估板可以正常识别，只有自行制作的PCB无法识别，需要检查自己的USB电路设计是否符合硬件设计的要求，如阻抗匹配要求、走线要求，TVS管是否结电容过大等。排查此问题比较直接的方法是直接连接USB的四根通信线到模块USB引脚，去掉电路板上原先设计的电路。
- 如经过以上排查仍无法识别，需要考虑是否模块损坏，换一块PCB板进行对比测试。

### 硬件如何设计可以让模组上电自动开机？

绝大部分模组直接将POWERKEY引脚通过下拉电阻接地即可，但是部分型号不允许一直接地，如BG95系列模组，具体可参考硬件设计手册。除了BG95系列，还有部分应用场景不能一直接地，如需要使用定时开关机降低功耗时，如一直接地，进行软件关机后又会自动开机，此时将需要使用BG95系列类似电路，开机完成后将POWERKEY引脚拉高，将不再影响软件关机功能。